/* Base Reset */
body {
  margin: 0;
  font-family: "Georgia", serif;
  background-color: #faf8f6;
  color: #3a2b20;
  scroll-behavior: smooth;
}

/* ===== HEADER ===== */
header {
  position: fixed;
  top: 0;
  width: 100%;
  background: linear-gradient(to bottom, #fff, #f7f4f1);
  text-align: center;
  z-index: 1000;
  transition: all 0.3s ease;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

header img {
  width: 130px;
  border-radius: 50%;
  margin-top: 10px;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

header h1 {
  margin: 5px 0 0;
  color: #4b3b2f;
  font-size: 1.8em;
  position: relative;
  top: -10px;            /* moves title slightly upward */
  transition: all 0.3s ease;
}

header p.date {
  margin: 2px 0 2px;  /* reduced bottom margin to lift it up */
  font-style: italic;
  color: #5a4a3d;
  position: relative;
  top: -4px;          /* moves date slightly upward */
  transition: opacity 0.3s ease;
}


header.shrink img {
  width: 80px;
}

header.shrink h1 {
  font-size: 1.3em;
}

header.shrink p.date {
  opacity: 0;
}

/* ===== NAVBAR ===== */
/* --- FINAL FIX: Attach navbar right below header only on small screens --- */
@media (max-width: 600px) {
  nav {
    position: fixed;
    top: calc(100px + 3.2em); /* right below portrait and date */
    background-color: #e9e4df;
    width: 100%;
    z-index: 999;
    margin: 0;
    padding: 10px 0;
  }

  header.shrink + nav {
    top: calc(80px + 2.5em); /* adjust on shrink */
  }

  main {
    padding-top: 260px; /* prevents overlap with fixed header + nav */
  }
}




header.shrink + nav {
  top: 100px; /* moves upward when header shrinks */
}


nav a {
  text-decoration: none;
  color: #4b3b2f;
  font-weight: bold;
  position: relative;
}

nav a.active,
nav a:hover {
  color: #a17b5c;
}

nav a::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -3px;
  width: 0%;
  height: 2px;
  background: #a17b5c;
  transition: width 0.3s ease;
}

nav a.active::after,
nav a:hover::after {
  width: 100%;
}

/* ===== MAIN ===== */
main {
  padding-top: 280px; /* Header + Navbar height */
}

/* ===== VERSE SECTION ===== */
.verse-section {
  text-align: center;
  background: #f4ede7;
  color: #4b3b2f;
  padding: 30px 15px;
  margin: 30px auto;
  max-width: 850px;
  border-radius: 10px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.verse-section p {
  font-style: italic;
  font-size: 1.1em;
  margin-bottom: 10px;
}

/* ===== CONTENT SECTIONS ===== */
.content-section {
  max-width: 900px;
  margin: 40px auto;
  padding: 20px;
  background: #fffaf7;
  border-radius: 10px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.8s ease, transform 0.8s ease;
}

.content-section.visible {
  opacity: 1;
  transform: translateY(0);
}

.content-section h2 {
  border-bottom: 2px solid #d8c8b8;
  padding-bottom: 5px;
  margin-bottom: 15px;
}

/* ===== TIMELINE ===== */
.timeline {
  border-left: 4px solid #a17b5c;
  padding-left: 20px;
}

.timeline-item {
  margin-bottom: 30px;
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.8s ease, transform 0.8s ease;
}

.timeline-item.visible {
  opacity: 1;
  transform: translateY(0);
}

.timeline-date {
  font-weight: bold;
  color: #6b5845;
}

.timeline-content {
  background: #fff;
  padding: 15px 20px;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

/* ===== GALLERY (MASONRY) ===== */
.masonry-gallery {
  column-count: 4;
  column-gap: 15px;
  margin-top: 20px;
}

.masonry-gallery img {
  width: 100%;
  border-radius: 10px;
  margin-bottom: 15px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  break-inside: avoid;
  transition: transform 0.3s ease;
}

.masonry-gallery img:hover {
  transform: scale(1.03);
}

/* ===== FAMILY TREE ===== */
.familytree-container {
  text-align: center;
  margin-top: 20px;
}

.familytree-container img {
  max-width: 90%;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* ===== FOOTER ===== */
footer {
  text-align: center;
  background: #f0ebe6;
  padding: 30px;
  font-style: italic;
  color: #5a4a3d;
  margin-top: 40px;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 1024px) {
  .masonry-gallery { column-count: 3; }
}
@media (max-width: 768px) {
  header img { width: 100px; }
  header.shrink img { width: 70px; }
  nav { flex-wrap: wrap; gap: 15px; top: 160px; }
  header.shrink + nav { top: 110px; }
  .masonry-gallery { column-count: 2; }
  main { padding-top: 250px; }
}


/* ===== RESPONSIVE FIX FOR MOBILE HEADER (IMPROVED) ===== */
@media (max-width: 600px) {
  header h1 {
    font-size: clamp(1.1em, 4.5vw, 1.5em); /* scales dynamically with screen width */
    line-height: 1.2em;
    text-align: center;
    padding: 0 22px;           /* keeps text from hitting edges */
    word-break: break-word;    /* gracefully wraps long names */
    white-space: normal;       /* allows proper line wrapping */
    position: relative;
    top: -6px;                 /* keeps balance with portrait */
  }

  header p.date {
    font-size: 0.95em;
    line-height: 1.2em;
    top: -6px;
  }

  nav {
    flex-wrap: wrap;
    justify-content: center;
    font-size: 0.95em;
    gap: 10px;
    padding: 6px 0;
  }
}

/* ===== MOBILE HEADER + NAVBAR FIX ===== */
@media (max-width: 600px) {
  header {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: #faf7f2;
    padding-bottom: 6px;
  }

  nav {
    position: sticky;
    top: 110px; /* aligns just below the header portrait and title */
    z-index: 999;
    background: #e9dfd3;
    border-top: 1px solid #d6c8b6;
    border-bottom: 1px solid #d6c8b6;
    padding: 6px 0;
  }

  body {
    overflow-x: hidden;
  }

  header img {
    width: 85px;
    height: 85px;
    object-fit: cover;
  }
}


/* ===== UNIVERSAL MOBILE + SAFARI FIX FOR HEADER & NAV ===== */
@supports (-webkit-touch-callout: none) or (overflow: -webkit-paged-x) {
  /* Special fix for iOS Safari */
  header,
  nav {
    position: -webkit-sticky;
    position: sticky;
    z-index: 1000;
    backface-visibility: hidden;
    transform: translateZ(0); /* hardware acceleration prevents flicker */
  }

  header {
    top: 0;
    background-color: #faf7f2;
    padding-bottom: 6px;
  }

  nav {
    top: 110px; /* sits right below the portrait & title */
    background-color: #e9dfd3;
    border-top: 1px solid #d6c8b6;
    border-bottom: 1px solid #d6c8b6;
    padding: 8px 0;
  }
}

@media (max-width: 600px) {
  header {
    position: fixed;
    top: 0;
    width: 100%;
    background: #faf7f2;
    z-index: 1000;
  }

  nav {
    position: fixed;
    top: 105px; /* adjust if portrait overlaps */
    width: 100%;
    background: #e9dfd3;
    border-top: 1px solid #d6c8b6;
    border-bottom: 1px solid #d6c8b6;
    z-index: 999;
  }

  /* Prevent body content from going under the fixed elements */
  body {
    padding-top: 190px; /* gives room below header + nav */
    overflow-x: hidden;
  }

  /* Reduce font and spacing for long titles */
  header h1 {
    font-size: clamp(1em, 4.2vw, 1.4em);
    padding: 0 20px;
    line-height: 1.3em;
    text-align: center;
    word-break: break-word;
  }

  header p.date {
    font-size: 0.9em;
    line-height: 1.2em;
  }

  header img {
    width: 80px;
    height: 80px;
    object-fit: cover;
  }
}


/* ===== FINAL MOBILE + SAFARI SAFE FIX FOR NAVBAR ===== */
@supports (-webkit-touch-callout: none) or (overflow: -webkit-paged-x) {
  header, nav {
    position: relative !important;
    z-index: 1000;
  }

  .header-nav-wrapper {
    position: fixed;
    top: env(safe-area-inset-top, 0);
    left: 0;
    width: 100%;
    z-index: 1000;
    background: #faf7f2;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    padding-bottom: 5px;
  }

  header {
    text-align: center;
    padding: 10px 0 2px;
    background: #faf7f2;
  }

  nav {
    background: #e9dfd3;
    border-top: 1px solid #d6c8b6;
    border-bottom: 1px solid #d6c8b6;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 15px;
    padding: 10px 0;
  }

  body {
    padding-top: 200px; /* ensures no overlap with fixed header+nav */
    margin: 0;
    overflow-x: hidden;
  }

  header img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 50%;
  }

  header h1 {
    font-size: clamp(1em, 4.2vw, 1.4em);
    line-height: 1.3em;
    margin: 8px 0 4px;
    padding: 0 20px;
    word-break: break-word;
  }

  header p.date {
    font-size: 0.9em;
    line-height: 1.2em;
    color: #5c4b3a;
  }
}


/* ===== FINAL FIX: UNIVERSAL MOBILE HEADER + NAV ===== */
@media (max-width: 768px) {
  .header-nav-wrapper {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1500;
    background: linear-gradient(to bottom, #ffffff, #f7f4f1);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
  }

  header,
  nav {
    position: relative !important;
    width: 100%;
  }

  nav {
    background: #e9dfd3;
    border-top: 1px solid #d6c8b6;
    border-bottom: 1px solid #d6c8b6;
  }

  body {
    padding-top: 210px; /* ensures content starts below header+nav */
    overflow-x: hidden;
  }
}


/* ===== FINAL UNIVERSAL NAVBAR FIX UNDER HEADER ===== */

/* Desktop – perfect alignment, no gap */
nav {
  position: fixed;
  top: calc(180px + 1.5em); /* sits directly below the date */
  width: 100%;
  background-color: #e9e4df;
  display: flex;
  justify-content: center;
  gap: 25px;
  padding: 10px 0;
  z-index: 999;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
  transition: top 0.3s ease;
}

/* Adjust on shrink */
header.shrink + nav {
  top: calc(100px + 1em);
}

/* Mobile Fix – clean placement below header */
@media (max-width: 600px) {
  nav {
    position: fixed;
    top: calc(110px + 1.2em);
    background-color: #e9e4df;
    width: 100%;
    z-index: 999;
    padding: 8px 0;
  }

  header.shrink + nav {
    top: calc(85px + 1em);
  }

  main {
    padding-top: 260px; /* prevents overlap */
  }
}


/* ===== FINAL FIX: Header + Navbar stay fixed together ===== */
.header-nav-wrapper {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1500;
  background: linear-gradient(to bottom, #ffffff, #f7f4f1);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

/* keep header normal inside wrapper */
.header-nav-wrapper header {
  position: relative;
  text-align: center;
  z-index: 2;
}

/* navbar fixed right below header — never moves on scroll */
.header-nav-wrapper nav {
  position: fixed;
  top: 215px; /* Adjust to perfectly meet bottom of date */
  left: 0;
  width: 100%;
  background-color: #e9e4df;
  border-top: 1px solid #d6c8b6;
  border-bottom: 1px solid #d6c8b6;
  display: flex;
  justify-content: center;
  gap: 25px;
  padding: 10px 0;
  z-index: 1499;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

/* when header shrinks, lift navbar accordingly */
header.shrink + nav,
.header-nav-wrapper header.shrink + nav {
  top: 130px;
}

/* make room below header+nav so content doesn’t hide under them */
main {
  padding-top: 310px !important;
}

/* ===== MOBILE FIX ===== */
@media (max-width: 600px) {
  .header-nav-wrapper nav {
    top: 170px; /* lower for smaller screens */
    padding: 8px 0;
    flex-wrap: wrap;
    gap: 12px;
  }
  header.shrink + nav,
  .header-nav-wrapper header.shrink + nav {
    top: 110px;
  }
  main {
    padding-top: 270px !important;
  }
}
